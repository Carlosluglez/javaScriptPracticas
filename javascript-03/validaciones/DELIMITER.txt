DELIMITER $$

ALTER TABLE DPTO
ADD CODIGO_DPTO INT PRIMARY KEY ;

CREATE TRIGGER gencoddpto
BEFORE INSERT ON COD_DPTO
FOR EACH ROW
BEGIN
  SET NEW.CODIGO_DPTO=CONCAT('D',LPAD((SELECT LAST_INSERT_ID()+1),3,'0'));
END$$
DELIMITER ;
