window.onload = inicio;
function inicio(){
    console.log("Validar");
    document.formulario.onsubmit=validar;
    document.formulario.telefono.onkeypress=solodigito;
    document.formulario.codigo_postal.onkeypress=solodigito;
    document.formulario.codigo_banco.onkeypress=solodigito;
    document.formulario.codigo_oficina.onkeypress=solodigito;
    document.formulario.codigo_control.onkeypress=solodigito;
    document.formulario.numero_cuenta.onkeypress=solodigito;
    document.formulario.numero_trabajadores.onkeypress=solodigito;
    document.formulario.numero_fabricas.onkeypress=solodigito;
}

function validar(){
        document.formulario.error_razon.value = "";
          
        let val1 =validarRazon();
        let val2 =validarTelefono();
        let val3 =validarCodEmp();
<<<<<<< HEAD
        let val16 =botonSelect();
        let val30= validarSectorEconomico();
        let val31= validarFormatoIBAN();

    return val1 && val2 && val3 && val16 && val30 && val31;
       
=======
        let val4 =validarDirec();
        let val5 =validLocalidad();
        let val6 =validCodPos();
        let codposcam =cambioCodPos();

        console.log(val1,val2);
  
        return val1 && val2 && val3 && val4 && val5 && val6;
   
    
>>>>>>> 61bd91cd4635fcfe6b043a2e0e631dc7f22fa57a
}

function solodigito(elevento){

    let evento=elevento||window.event;
    let caracter = String.fromCharCode(evento.charCode);
    let mostrar = true;
    let epdigito = /^\d$/;
    if(!epdigito.test(caracter))
        mostrar=false;
        return mostrar;
}

//-------------------------------expresiones regulares--------------------------------//
function validarTelefono() {
    let botonBien = true;
    let cadena_errores = "";
    let regEx = /^[6789]\d{8}/;
    if (!regEx.test(document.formulario.telefono.value)) {
        cadena_errores = "Error, el número de telefono es incorrecto";
        document.formulario.error_telefono.value = cadena_errores;
        document.formulario.error_telefono.style.visibility = "visible";
        document.formulario.error_telefono.style.border = "1px solid black";
        botonBien = false;
    } else {
        document.formulario.error_telefono.style.visibility = "hidden";
    }
    return botonBien;

}

function validarRazon() {

    let cadena_errores = "";
    let regexEmpiezaPorLetra = /^[a-zA-ZñÑáéíóúÁÉÚÍÚ]/;
    let regexComprobarUltima = /[a-zA-ZñÑáéíóúÁÉÚÍÚ\d.]$/;
    let regexComprobarInterior = /^[A-Za-z0-9ªº\-.ÁÉÚÍÚñÑáéíóú ]*$/;

    let val1 = true;
    let val2 = true;
    let val3 = true;

    if (!regexEmpiezaPorLetra.test(document.formulario.razon.value)) {

        cadena_errores += "Error el primer caracter es incorreecto,";
        document.formulario.error_razon.value = cadena_errores;
        document.formulario.error_razon.style.visibility = "visible";
        document.formulario.error_razon.style.visibility = "1px solid black";
        val1 = false;

    } else {
        document.formulario.error_razon.style.visibility = "hidden";
    }

    if (!regexComprobarUltima.test(document.formulario.razon.value)) {

        cadena_errores += "Error el ultimo caracter es incorreecto,";
        document.formulario.error_razon.value = cadena_errores;
        document.formulario.error_razon.style.visibility = "visible";
        document.formulario.error_razon.style.visibility = "1px solid black";
        val2 = false;

    } else {
        document.formulario.error_razon.style.visibility = "hidden";
    }
    if (!regexComprobarInterior.test(document.formulario.razon.value)) {
        cadena_errores += "Error hay un caracter incorrecto en el nombre";
        document.formulario.error_razon.value = cadena_errores;
        document.formulario.error_razon.style.visibility = "visible";
        document.formulario.error_razon.style.visibility = "1px solid black";
        val3 = false;

    } else {
        document.formulario.error_razon.style.visibility = "hidden";
    }

    return val1 && val2 && val3;
}

function validarCodEmp() {
    let botonBien = true;
    let cadena_errores = "";

    let regex = /^[\da-zA-ZáéíóúÁÉÍÓÚñÑ]{5,10}$/;

    if (!regex.test(document.formulario.codigo_empresa.value)) {
        cadena_errores = "El Código de la empresa va a contener letras y dígitos y va a tener un número de caracteres comprendidos entre 5 y 10";
        document.formulario.error_codigo.value = cadena_errores;
        document.formulario.error_codigo.style.visibility = "visible";
        document.formulario.error_codigo.style.visibility = "1px solid black";

        botonBien = false;
    } else {
        document.formulario.error_codigo.style.visibility = "hidden";
    }

    return botonBien;
}



